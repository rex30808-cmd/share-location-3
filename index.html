<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>è¿·è·¯æ•‘æ´å®šä½ç³»çµ±</title>
  <style>
    body{font-family:"Noto Sans TC",system-ui,Segoe UI,Roboto,Arial; background: linear-gradient(180deg,#cdeac0 0%,#a8d5ba 100%); margin:0; color:#2f3e46; min-height:100vh; display:flex; flex-direction:column; align-items:center; justify-content:flex-start;}
    header{padding-top:28px; text-align:center;}
    .logo{width:70px;height:70px;border-radius:50%;background:radial-gradient(circle at 30% 30%, #74c69d, #2d6a4f);display:inline-flex;align-items:center;justify-content:center;box-shadow:0 2px 6px rgba(0,0,0,0.2);margin-bottom:8px;}
    .logo::before{content:"ğŸ§­";font-size:2rem;color:#fff;}
    h1{margin:6px 0;font-size:1.6rem;}
    p.description{margin:0 20px;line-height:1.6;font-size:1rem;}
    main{width:100%;max-width:420px;padding:20px;box-sizing:border-box;}
    button{display:block;width:100%;padding:16px 18px;margin:12px 0;border:none;border-radius:999px;background:linear-gradient(90deg,#52b788,#40916c);color:#fff;font-size:18px;cursor:pointer;box-shadow:0 3px 6px rgba(0,0,0,0.12);}
    button:active{transform:translateY(1px);}
    #mapLink{margin-top:10px;word-break:break-word;font-weight:600;color:#123e2b;font-size:1rem;}
    .note{font-size:0.95rem;color:#2f3e46;margin-top:10px;}
    .step{background:rgba(255,255,255,0.6);padding:8px 12px;border-radius:12px;margin-bottom:6px;font-weight:600;}
    footer{font-size:0.85rem;padding:12px 8px;color:#495057;text-align:center;}
    a.button-link{text-decoration:none;}
  </style>
</head>
<body>
  <header>
    <div class="logo"></div>
    <h1>ğŸ§­ è¿·è·¯æ•‘æ´å®šä½ç³»çµ±</h1>
    <p class="description">è‹¥ä½ èˆ‡éšŠä¼èµ°æ•£ï¼Œè«‹ä¾åºæ“ä½œï¼šå–å¾—ä½ çš„ä½ç½®ä¸¦ç™¼é€çµ¦é ˜éšŠã€‚<br><br>ğŸ“ è³‡æ–™åƒ…ç”¨æ–¼å³æ™‚å®šä½ï¼Œä¸æœƒè¢«å„²å­˜ã€‚</p>
  </header>

  <main>
    <div class="step">æ­¥é©Ÿ1ï¼šåŠ å…¥é ˜éšŠå¥½å‹ï¼ˆç¢ºä¿å¯å‚³é€è¨Šæ¯ï¼‰</div>
    <a class="button-link" href="https://lin.ee/N3qZA4y" target="_blank">
      <button>â• åŠ å…¥é ˜éšŠå¥½å‹</button>
    </a>

    <div class="step">æ­¥é©Ÿ2ï¼šå–å¾—ä½ çš„ç¾åœ¨ä½ç½®</div>
    <button id="getBtn">ğŸ“ å–å¾—ç›®å‰ä½ç½®</button>

    <div id="mapLink"></div>

    <div id="actions" style="display:none;">
      <div class="step">æ­¥é©Ÿ3ï¼šç™¼é€ä½ çš„ç¾åœ¨ä½ç½®çµ¦é ˜éšŠ</div>
      <button id="sendLineBtn">ğŸ’¬ ç™¼é€ç¾åœ¨ä½ç½®</button>
      <button id="copyBtn">ğŸ“‹ è¤‡è£½å®šä½é€£çµ</button>
      <p class="note">è‹¥è‡ªå‹•å‚³é€å¤±æ•—ï¼Œå¯æ‰‹å‹•è¤‡è£½é€£çµæˆ–æˆªåœ–é é¢å‚³çµ¦é ˜éšŠã€‚</p>
    </div>
  </main>

  <footer>ç”±é ˜éšŠæé•·ç´˜è£½ä½œ | Powered by Netlify</footer>

  <script>
    let mapUrl = "";
    const getBtn = document.getElementById('getBtn');
    const sendLineBtn = document.getElementById('sendLineBtn');
    const copyBtn = document.getElementById('copyBtn');
    const actions = document.getElementById('actions');
    const mapLinkDiv = document.getElementById('mapLink');

    getBtn.addEventListener('click', () => {
      if (!navigator.geolocation) {
        alert('æ­¤è£ç½®ä¸æ”¯æ´å®šä½åŠŸèƒ½ã€‚');
        return;
      }
      getBtn.disabled = true;
      getBtn.textContent = 'â³ å–å¾—ä½ç½®ä¸­...';
      navigator.geolocation.getCurrentPosition(pos => {
        const lat = pos.coords.latitude.toFixed(6);
        const lon = pos.coords.longitude.toFixed(6);
        mapUrl = `https://maps.google.com/?q=${lat},${lon}`;
        mapLinkDiv.innerHTML = `âœ… å®šä½æˆåŠŸï¼<br>ğŸ“Œ æ‚¨çš„ä½ç½®ï¼š<br><a href="${mapUrl}" target="_blank" rel="noopener">${mapUrl}</a>`;
        actions.style.display = 'block';
        getBtn.disabled = false;
        getBtn.textContent = 'ğŸ“ å–å¾—ç›®å‰ä½ç½®';
        actions.scrollIntoView({behavior:'smooth', block:'center'});
      }, err => {
        getBtn.disabled = false;
        getBtn.textContent = 'ğŸ“ å–å¾—ç›®å‰ä½ç½®';
        switch(err.code) {
          case err.PERMISSION_DENIED:
            alert('âš ï¸ æ‚¨æ‹’çµ•äº†å®šä½è¦æ±‚ã€‚è«‹åˆ°ç€è¦½å™¨è¨­å®šæ‰“é–‹å®šä½æ¬Šé™ã€‚');
            break;
          case err.POSITION_UNAVAILABLE:
            alert('âš ï¸ ç„¡æ³•å–å¾—å®šä½è³‡è¨Šã€‚');
            break;
          case err.TIMEOUT:
            alert('âš ï¸ å®šä½é€¾æ™‚ï¼Œè«‹å†è©¦ä¸€æ¬¡ã€‚');
            break;
          default:
            alert('âš ï¸ ç™¼ç”ŸéŒ¯èª¤ï¼š' + err.message);
        }
      }, {enableHighAccuracy:true, timeout:15000, maximumAge:0});
    });

    sendLineBtn.addEventListener('click', () => {
      if (!mapUrl) return alert('è«‹å…ˆå–å¾—ä½ç½®');
      const message = encodeURIComponent(`æˆ‘ç¾åœ¨çš„ä½ç½®ï¼š${mapUrl}`);
      const composeUrl = `https://line.me/R/msg/text/?${message}`;
      window.open(composeUrl, '_blank');
    });

    copyBtn.addEventListener('click', () => {
      if (!mapUrl) return alert('è«‹å…ˆå–å¾—ä½ç½®');
      navigator.clipboard.writeText(mapUrl).then(() => {
        alert('ğŸ“‹ å·²è¤‡è£½å®šä½é€£çµï¼Œå¯è²¼ä¸Šå‚³é€çµ¦é ˜éšŠã€‚');
      }).catch(() => {
        alert('âŒ è¤‡è£½å¤±æ•—ï¼Œè«‹é•·æŒ‰é€£çµæ‰‹å‹•è¤‡è£½ã€‚');
      });
    });
  </script>
</body>
</html>
